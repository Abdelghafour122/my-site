---
import BaseLayout from "@layouts/BaseLayout.astro";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects"))
  .sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf())
  .slice(0, 4);

const birthday = new Date("08-12-2001");
const now = new Date();

const diffInMilliseconds = now.getTime() - birthday.getTime();
const ageDate = new Date(diffInMilliseconds);

const age = Math.abs(ageDate.getUTCFullYear() - 1970);
---

<BaseLayout>
  <main class="w-[960px]">
    <div class="intro mb-32">
      <div class="w-full flex items-start justify-center gap-10 mb-8">
        <div class="text">
          <h2 class="text-stone-800 dark:text-stone-100 tracking-wide">
            About me
          </h2>
          <p class="text-stone-800 dark:text-stone-300 leading-snug">
            I'm a {age}-year-old web developer from Algeria. Coming from a
            non-technical background I kicked off my coding journey at 19 and
            it's been a wild ride of love (mostly) and a bit of a love/hate
            dance.
          </p>
          <p class="text-stone-800 dark:text-stone-300 leading-snug">
            Excited to connect with fellow tech enthusiasts, make cool things,
            and dive into new adventures!
          </p>
        </div>

        <img
          src="/blog-placeholder-about.jpg"
          width={500}
          height={500}
          alt="portrait-img"
        />
      </div>
    </div>

    <section
      class="skills mb-32 flex flex-col items-start justify-center w-full"
    >
      <h2 class="text-stone-800 dark:text-stone-100">Skills:</h2>
      <p class="text-stone-800 dark:text-stone-300 text-left leading-tight">
        I'm skilled in these technologies, also looking to learn much more!
      </p>
      <div class="icons w-full flex flex-wrap gap-[2rem] justify-center">
        <Icon name="css" size={70} color="#264de4" />
        <Icon name="sass" size={70} color="#c69" />
        <Icon name="javascript" size={70} />
        <Icon name="typescript" size={70} />
        <Icon
          name="react"
          size={70}
          class="animate-spin-slow"
          color="#149eca"
        />
        <Icon name="next-js" size={70} />
        <Icon name="tailwindcss" size={70} />
        <Icon name="nodejs" size={70} />
      </div>
    </section>

    <section
      class="projects mb-32 flex flex-col items-center justify-center w-full"
    >
      <h2 class="text-stone-800 dark:text-stone-100">Projects:</h2>
      <p
        class="text-stone-800 dark:text-stone-300 text-center max-w-lg leading-tight"
      >
        Take a look at some of my projects:
      </p>
      <ul class="w-full flex flex-wrap gap-8">
        {
          projects.map((project) => {
            const {
              data: { title, description, heroImage },
              slug,
            } = project;
            return (
              <li class="project w-full text-center md:w-[calc(50%_-_1rem)] md:text-left group">
                <a class="w-full h-full" href={`/projects/${slug}`}>
                  <img
                    src={`${heroImage}`}
                    alt="project-hero-img"
                    class="transition-shadow group-hover:shadow-2xl"
                  />
                  <h4 class="transition-colors my-2 group-hover:text-[rgb(var(--accent))] text-stone-800 dark:text-stone-100">
                    {title}
                  </h4>
                  <p class="transition-colors m-0 leading-tight text-[rgb(var(--gray))] dark:text-stone-300 group-hover:text-[rgb(var(--accent))]">
                    {description}
                  </p>
                </a>
              </li>
            );
          })
        }
      </ul>
      <div class="w-full text-center mt-8">
        <a
          href="/projects"
          class="text-center underline font-semibold uppercase transition-colors dark:text-[rgb(var(--gray-light))] dark:hover:text-[rgb(var(--gray))]"
          >See all projects</a
        >
      </div>
    </section>

    <section
      class="contact mb-10 flex flex-col items-center justify-center w-full"
    >
      <h2 class="text-stone-800 dark:text-stone-100">Contact me!</h2>
      <p
        class="text-stone-800 dark:text-stone-300 text-center max-w-lg leading-tight"
      >
        Questions or collaborations? Click the button below to get in touch.
        Looking forward to hearing from you!
      </p>
      <a
        href="mailto:echikr.abdelghafour@hotmail.com"
        target="_blank"
        class="px-4 py-2 text-stone-50 hover:text-stone-50 font-extrabold text-3xl bg-[var(--accent)] dark:bg-[rgb(var(--gray))] rounded-md hover:scale-110 transition-transform hover:text-[var(--accent)]"
      >
        Contact me
      </a>
    </section>
  </main>
</BaseLayout>
